<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMPAKTOR ‚Äî –ù–∞—É–∫–æ–≤—ñ –ø—Ä–æ–≥–Ω–æ–∑–∏ –¥–ª—è –ó–µ–º–ª—ñ</title>
    <link rel="stylesheet" href="style.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/OBJLoader.js"></script>
    </head>
<body class="bg-gradient-to-b min-h-screen text-slate-900">

    <nav class="flex justify-center max-w-6xl mx-auto px-6 pt-4 main-tab-stack-mobile">
        <button id="main-tab-meteorites"
            class="main-tab-button rounded-t-lg font-bold transition main-tab-active">
            –ó–∞–≥–∞–ª—å–Ω—ñ –≤—ñ–¥–æ–º–æ—Å—Ç—ñ –º–µ—Ç–µ–æ—Ä–∏—Ç—ñ–≤
        </button>
        <button id="main-tab-impaktor"
            class="main-tab-button rounded-t-lg font-bold transition main-tab-inactive">
            IMPAKTOR
        </button>
    </nav>
    <header class="max-w-6xl mx-auto px-6 py-8 flex items-start justify-between gap-6 border-t-4 border-sky-800">
        <div id="header-text-container">
            </div>
        <div id="view-switcher-container" class="flex items-center gap-1 border border-slate-300 p-1 rounded-lg bg-white shadow-sm">
            <span class="text-xs text-slate-500 mr-1 font-medium hidden sm:inline">–í–∏–≥–ª—è–¥:</span>
            <button data-view="auto" class="view-mode-icon p-1 rounded transition" title="–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ (üåê)">üåê</button>
            <button data-view="pc" class="view-mode-icon p-1 rounded transition" title="–ü–ö –í–∏–≥–ª—è–¥ (üíª)">üíª</button>
            <button data-view="mobile" class="view-mode-icon p-1 rounded transition" title="–ú–æ–±—ñ–ª—å–Ω–∏–π –í–∏–≥–ª—è–¥ (üì±)">üì±</button>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-6 pb-24 space-y-12">
        
        <div id="page-content-wrapper">
            
            <div id="meteorite-info-page" class="page-content space-y-10 bg-white rounded-xl shadow-lg p-8">
                </div>

            <div id="impaktor-page" class="page-content space-y-12 hidden">
                
                <section id="history-section" class="bg-white rounded-2xl shadow-lg p-8 space-y-4">
                    <h2 class="text-3xl font-bold text-slate-800 border-b pb-2 border-slate-200">–Ü—Å—Ç–æ—Ä—ñ—è –æ–±'—î–∫—Ç–∞: –ê—Å—Ç–µ—Ä–æ—ó–¥ "–Ü–º–ø–∞–∫—Ç–æ—Ä-X"</h2>
                    <div class="flex gap-6 flex-col-mobile">
                        <div class="flex-1">
                            <div class="overflow-hidden">
                                <img src="Impactor/images/658663c76dea77bbf97e414e4e21c0ea.jpeg" 
                                    alt="–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∞—Å—Ç–µ—Ä–æ—ó–¥–∞, —â–æ –Ω–∞–±–ª–∏–∂–∞—î—Ç—å—Å—è –¥–æ –ó–µ–º–ª—ñ"
                                    onerror="this.onerror=null; this.src='https://images.unsplash.com/photo-1446776811953-b23d57bd21aa?auto=format&fit=crop&w=1200&q=60';"
                                    class="object-cover w-full h-80 shadow-lg mb-4 image-slight-rounded" /> 
                            </div>
                        </div>
                        <div class="flex-1 text-slate-700 leading-relaxed text-lg space-y-3">
                            <h3 class="text-xl font-semibold text-sky-800">–í—ñ–¥–∫—Ä–∏—Ç—Ç—è —Ç–∞ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è</h3>
                            <p><strong>–ê—Å—Ç–µ—Ä–æ—ó–¥ "–Ü–º–ø–∞–∫—Ç–æ—Ä-X"</strong> –±—É–≤ –≤—ñ–¥–∫—Ä–∏—Ç–∏–π —É 2025 —Ä–æ—Ü—ñ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Ç–µ–ª–µ—Å–∫–æ–ø–∞ Pan-STARRS. –ö–ª–∞—Å–∏—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π —è–∫ –Ω–∞–≤–∫–æ–ª–æ–∑–µ–º–Ω–∏–π –æ–±'—î–∫—Ç (NEO) –≥—Ä—É–ø–∏ –ê–ø–æ–ª–ª–æ–Ω–∞. –ô–æ–≥–æ –¥—ñ–∞–º–µ—Ç—Ä –æ—Ü—ñ–Ω—é—î—Ç—å—Å—è –ø—Ä–∏–±–ª–∏–∑–Ω–æ –≤ 3 –∫—ñ–ª–æ–º–µ—Ç—Ä–∏.</p>
                            
                            <h3 class="text-xl font-semibold text-sky-800">–ü–µ—Ä—à—ñ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–∏</h3>
                            <p>–ü–æ—á–∞—Ç–∫–æ–≤—ñ –∞—Å—Ç—Ä–æ–Ω–æ–º—ñ—á–Ω—ñ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–∏ –≤–∫–∞–∑—É–≤–∞–ª–∏ –Ω–∞ –Ω–µ–≤–µ–ª–∏–∫—É, –∞–ª–µ –Ω–µ–Ω—É–ª—å–æ–≤—É –π–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å –∑—ñ—Ç–∫–Ω–µ–Ω–Ω—è —ñ–∑ –ó–µ–º–ª–µ—é —É –≤—ñ–¥–¥–∞–ª–µ–Ω–æ–º—É –º–∞–π–±—É—Ç–Ω—å–æ–º—É (2070 —Ä—ñ–∫). –¶–µ –≤–∏–∫–ª–∏–∫–∞–ª–æ –º—ñ–∂–Ω–∞—Ä–æ–¥–Ω—É –ø—Ä–æ–≥—Ä–∞–º—É —Å–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω—å —ñ —É—Ç–æ—á–Ω–µ–Ω–Ω—è –π–æ–≥–æ –æ—Ä–±—ñ—Ç–∏.</p>
                            
                            <h3 class="text-xl font-semibold text-sky-800">–ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞—Ç—É—Å</h3>
                            <p>–ó–∞–≤–¥—è–∫–∏ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–º –¥–∞–Ω–∏–º –≤—ñ–¥ –æ–±—Å–µ—Ä–≤–∞—Ç–æ—Ä—ñ–π NASA —Ç–∞ ESA, —Ç—Ä–∞—î–∫—Ç–æ—Ä—ñ—è –±—É–ª–∞ —É—Ç–æ—á–Ω–µ–Ω–∞. –ü–æ—Ç–æ—á–Ω—ñ –ø—Ä–æ–≥–Ω–æ–∑–∏ —Ä–æ–∑–¥—ñ–ª–∏–ª–∏—Å—è –Ω–∞ –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó, —è–∫—ñ –∞–Ω–∞–ª—ñ–∑—É—é—Ç—å—Å—è –Ω–∏–∂—á–µ.</p>
                        </div>
                    </div>
                </section>
                
                <nav class="flex gap-3 justify-center mb-6 nav-stack-mobile">
                    <button id="flyby-btn"
                        class="nav-button rounded-lg font-medium transition btn-active-flyby w-full-mobile">
                        –ü—Ä–æ–ª—ñ—Ç –º–∏–º–æ
                    </button>
                    <button id="collision-btn"
                        class="nav-button rounded-lg font-medium transition btn-inactive-collision border w-full-mobile">
                        –ó—ñ—Ç–∫–Ω–µ–Ω–Ω—è
                    </button>
                </nav>

                <div id="content-container" class="space-y-10">
                    </div>

                <iframe 
                    src="https://meteor-madness-two.vercel.app/" 
                    width="100%" 
                    height="500px" 
                    frameborder="0" 
                    style="border: 2px solid #075985; border-radius: 12px; margin-top: 1rem;"
                    title="–°—Ç–æ—Ä—ñ–Ω–∫–∞ –í—ñ–∫—ñ–ø–µ–¥—ñ—ó –ø—Ä–æ –º–µ—Ç–µ–æ—Ä–∏—Ç–∏"
                    allowfullscreen
                >
                    –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î –≤–±—É–¥–æ–≤–∞–Ω—ñ —Ñ—Ä–µ–π–º–∏.
                </iframe>

                <div class="overflow-x-auto">
                    <div class="bg-white rounded-xl shadow-lg">
                        <h2 class="text-2xl font-bold text-center pt-8 mb-6 text-slate-800">–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä–æ–≥–Ω–æ–∑—ñ–≤</h2>
                        <table class="min-w-full text-lg border-collapse">
                            <thead>
                                <tr class="bg-blue-50 text-sky-800 border-b-2 border-slate-200">
                                    <th class="p-4 text-left rounded-tl-xl">–ê—Å–ø–µ–∫—Ç</th>
                                    <th class="p-4 text-blue-700 font-extrabold">–ü—Ä–æ–ª—ñ—Ç –º–∏–º–æ</th>
                                    <th class="p-4 text-red-700 font-extrabold rounded-tr-xl">–ó—ñ—Ç–∫–Ω–µ–Ω–Ω—è</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b border-slate-100">
                                    <td class="p-4 font-medium border-r border-slate-100">–ô–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å</td>
                                    <td class="p-4 border-r border-slate-100">–í–∏—Å–æ–∫–∞ –π–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å –ø—Ä–æ–ª—å–æ—Ç—É –±–µ–∑ –Ω–µ–±–µ–∑–ø–µ–∫–∏.</td>
                                    <td class="p-4">–ù–∞–¥–∑–≤–∏—á–∞–π–Ω–æ –Ω–∏–∑—å–∫–∞, –∞–ª–µ –∑ –≤–∏—Å–æ–∫–∏–º–∏ —Ä–∏–∑–∏–∫–∞–º–∏.</td>
                                </tr>
                                <tr class="bg-slate-50 border-b border-slate-100">
                                    <td class="p-4 font-medium border-r border-slate-100">–ù–∞—Å–ª—ñ–¥–∫–∏</td>
                                    <td class="p-4 border-r border-slate-100">–ù–∞—É–∫–æ–≤—ñ –¥–∞–Ω—ñ, —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω—ñ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è.</td>
                                    <td class="p-4">–ú–æ–∂–ª–∏–≤–µ –≥–ª–æ–±–∞–ª—å–Ω–µ –∑–Ω–∏—â–µ–Ω–Ω—è –µ–∫–æ—Å–∏—Å—Ç–µ–º.</td>
                                </tr>
                                <tr class="border-b border-slate-100">
                                    <td class="p-4 font-medium border-r border-slate-100">–î—ñ—ó –ª—é–¥—Å—Ç–≤–∞</td>
                                    <td class="p-4 border-r border-slate-100">–°–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è, –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è, –º—ñ–∂–Ω–∞—Ä–æ–¥–Ω–∞ —Å–ø—ñ–≤–ø—Ä–∞—Ü—è.</td>
                                    <td class="p-4">–†–æ–∑—Ä–æ–±–∫–∞ —Å–∏—Å—Ç–µ–º –≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è –π –∫–æ—Å–º—ñ—á–Ω–æ—ó –æ–±–æ—Ä–æ–Ω–∏.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            </div>
    </main>

    <div id="modal-overlay" class="modal-overlay hidden">
        <div id="modal-container" class="modal-container">
            <button id="modal-close-btn" class="modal-close-btn">
                &times;
            </button>
            <div id="modal-content" class="modal-content">
                <div id="model-viewer" class="w-full h-full min-h-[500px] flex justify-center items-center">
                    </div>
            </div>
        </div>
    </div>
    
    <style>
        .modal {
            display: none; 
            position: fixed; 
            z-index: 200; 
            left: 0;
            top: 0;
            width: 100%; 
            height: 100%; 
            overflow: auto; 
            background-color: rgb(0,0,0); 
            background-color: rgba(0,0,0,0.8); 
            padding-top: 50px;
        }

        .modal-content-static {
            background-color: #fefefe;
            margin: 5% auto; 
            padding: 20px;
            border: 1px solid #888;
            width: 90%; 
            max-width: 800px;
            border-radius: 10px;
            position: relative;
        }

        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            position: absolute;
            top: 10px;
            right: 20px;
        }

        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        
        /* –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è: –í–∏–¥–∞–ª–µ–Ω–æ inline-—Å—Ç–∏–ª—ñ iframe, —â–æ–± –≤–æ–Ω–∏ –∫–µ—Ä—É–≤–∞–ª–∏—Å—è CSS */
        .card-3d iframe {
             border-radius: 8px;
             box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
    </style>
    
    <script>
        // --- DOM Elements ---
        const impaktorPage = document.getElementById('impaktor-page');
        const meteoritePage = document.getElementById('meteorite-info-page');
        const headerTextContainer = document.getElementById('header-text-container');
        const mainTabMeteorites = document.getElementById('main-tab-meteorites');
        const mainTabImpaktor = document.getElementById('main-tab-impaktor');
        const contentContainer = document.getElementById('content-container');
        const flybyBtn = document.getElementById('flyby-btn');
        const collisionBtn = document.getElementById('collision-btn');
        const modalOverlay = document.getElementById('modal-overlay');
        const modalContent = document.getElementById('modal-content');
        const modalCloseBtn = document.getElementById('modal-close-btn');
        const modelViewer = document.getElementById('model-viewer'); 
        const body = document.body;
        const viewModeButtons = document.querySelectorAll('.view-mode-icon'); 
        
        // --- State Variables ---
        let siteView = localStorage.getItem('siteView') || 'auto'; 
        let currentView = '';
        let currentImpaktorPage = 'flyby'; 
        let currentMainPage = 'meteorites'; 
        let currentRenderer = null; 
        let currentAnimationId = null; 
        
        const defaultImage = 'https://images.unsplash.com/photo-1446776811953-b23d57bd21aa?auto=format&fit=crop&w=1200&q=60';

        const fixedImages = {
            flyby_calcs: 'Impactor/images/unnamed (1).png', 
            flyby_benefits: 'Impactor/images/unnamed (2).png', 
            flyby_future: 'Impactor/images/freepik__-__31536.png', 
            collision_risks: 'Impactor/images/freepik__the-style-is-candid-image-photography-with-natural__31537.png', 
            collision_prep: 'Impactor/images/freepik__the-style-is-candid-image-photography-with-natural__31538.png',
            collision_planning: 'Impactor/images/unnamed.png'
        };

        const predictionData = {
            flyby_calcs: {
                title: "–ê—Å—Ç—Ä–æ–Ω–æ–º—ñ—á–Ω—ñ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–∏",
                subtitle: "–ô–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å –ø—Ä–æ–ª—å–æ—Ç—É",
                image: fixedImages.flyby_calcs,
                color: 'border-blue-500',
                takes: [
                    "1. –ú–æ–¥–µ–ª—ñ NASA —Ç–∞ ESA –ø–æ–∫–∞–∑—É—é—Ç—å, —â–æ –±—ñ–ª—å—à—ñ—Å—Ç—å –≤—ñ–¥–æ–º–∏—Ö –∞—Å—Ç–µ—Ä–æ—ó–¥—ñ–≤ –º–∞—é—Ç—å —Ç—Ä–∞—î–∫—Ç–æ—Ä—ñ—ó, —è–∫—ñ –ø—Ä–æ–ª—è–≥–∞—é—Ç—å –ø–æ–≤–∑ –ó–µ–º–ª—é. –ô–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å –∑—ñ—Ç–∫–Ω–µ–Ω–Ω—è –≤ –Ω–∞–π–±–ª–∏–∂—á—ñ –¥–µ—Å—è—Ç–∏–ª—ñ—Ç—Ç—è **–Ω–∞–¥–∑–≤–∏—á–∞–π–Ω–æ –Ω–∏–∑—å–∫–∞**.",
                    "2. –ü—Ä–æ–ª—å–æ—Ç–∏ –Ω–∞ –±–µ–∑–ø–µ—á–Ω–∏—Ö –≤—ñ–¥—Å—Ç–∞–Ω—è—Ö –¥–∞—é—Ç—å –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å **—Å–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω—å —ñ –∑–±–æ—Ä—É –¥–∞–Ω–∏—Ö** –¥–ª—è —Ä–æ–∑–≤–∏—Ç–∫—É –ø–ª–∞–Ω–µ—Ç–∞—Ä–Ω–æ—ó –Ω–∞—É–∫–∏ —Ç–∞ —É—Ç–æ—á–Ω–µ–Ω–Ω—è –º–æ–¥–µ–ª–µ–π.",
                    "3. –ü–æ—Å—Ç—ñ–π–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –æ—Ä–±—ñ—Ç–∏ –¥–æ–∑–≤–æ–ª—è—î –º—ñ–Ω—ñ–º—ñ–∑—É–≤–∞—Ç–∏ –Ω–µ–≤–∏–∑–Ω–∞—á–µ–Ω—ñ—Å—Ç—å —â–æ–¥–æ —Ç—Ä–∞—î–∫—Ç–æ—Ä—ñ—ó –æ–±'—î–∫—Ç–∞ —Ç–∞ –∑–∞–±–µ–∑–ø–µ—á—É—î **–±–∞–≥–∞—Ç–æ—Ä—ñ—á–Ω–µ –ø—Ä–æ–≥–Ω–æ–∑—É–≤–∞–Ω–Ω—è –∑ –≤–∏—Å–æ–∫–æ—é —Ç–æ—á–Ω—ñ—Å—Ç—é**.",
                    "4. –£—Ç–æ—á–Ω–µ–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ —Ä—É—Ö—É –æ–±'—î–∫—Ç–∞ **–∑–º–µ–Ω—à—É—î –ø–∞–Ω—ñ–∫—É** —Å–µ—Ä–µ–¥ –≥—Ä–æ–º–∞–¥—Å—å–∫–æ—Å—Ç—ñ —Ç–∞ –¥–æ–∑–≤–æ–ª—è—î –∑–æ—Å–µ—Ä–µ–¥–∏—Ç–∏—Å—è –Ω–∞ –Ω–∞—É–∫–æ–≤–∏—Ö –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è—Ö, –∞ –Ω–µ –Ω–∞ –∫—Ä–∏–∑–æ–≤–æ–º—É –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—ñ.",
                    "5. –ó–∞–≤–¥—è–∫–∏ –ø—Ä–æ–ª—å–æ—Ç—É –±—É–¥–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–∞ **–µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–æ—ó –º–µ—Ä–µ–∂—ñ** —Ä–∞–Ω–Ω—å–æ–≥–æ –≤–∏—è–≤–ª–µ–Ω–Ω—è —Ç–∞ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –Ω–∞–≤–∫–æ–ª–æ–∑–µ–º–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤ (NEO)."
                ]
            },
            flyby_benefits: {
                title: "–ù–∞—É–∫–æ–≤—ñ –ø–µ—Ä–µ–≤–∞–≥–∏",
                subtitle: "–í–∏–≤—á–µ–Ω–Ω—è –∞—Å—Ç–µ—Ä–æ—ó–¥—ñ–≤",
                image: fixedImages.flyby_benefits,
                color: 'border-blue-500',
                takes: [
                    "1. –ü—Ä–æ–ª—å–æ—Ç–∏ –≤—ñ–¥–∫—Ä–∏–≤–∞—é—Ç—å —à–∞–Ω—Å –¥–ª—è **–¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å —Å–∫–ª–∞–¥—É –∞—Å—Ç–µ—Ä–æ—ó–¥—ñ–≤**, —â–æ –¥–æ–ø–æ–º–∞–≥–∞—î –∑—Ä–æ–∑—É–º—ñ—Ç–∏ –ø–æ—Ö–æ–¥–∂–µ–Ω–Ω—è –°–æ–Ω—è—á–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏ —Ç–∞ —Ä–∞–Ω–Ω—ñ –µ—Ç–∞–ø–∏ —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è –ø–ª–∞–Ω–µ—Ç.",
                    "2. –¢–∞–∫—ñ –ø–æ–¥—ñ—ó –º–æ–∂—É—Ç—å —Å—Ç–∏–º—É–ª—é–≤–∞—Ç–∏ —Ä–æ–∑–≤–∏—Ç–æ–∫ **–∫–æ—Å–º—ñ—á–Ω–∏—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ–π** —Ç–∞ –º—ñ–∂–Ω–∞—Ä–æ–¥–Ω–µ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏—Ü—Ç–≤–æ –≤ –≥–∞–ª—É–∑—ñ –∞—Å—Ç—Ä–æ–Ω–æ–º—ñ—ó —Ç–∞ –ø–ª–∞–Ω–µ—Ç–∞—Ä–Ω–æ—ó –æ–±–æ—Ä–æ–Ω–∏.",
                    "3. –ö—Ä—ñ–º –¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å, –ø—Ä–æ–ª—å–æ—Ç–∏ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ –¥–ª—è **–≥—Ä–∞–≤—ñ—Ç–∞—Ü—ñ–π–Ω–∏—Ö –º–∞–Ω–µ–≤—Ä—ñ–≤** (\"–≥—Ä–∞–≤—ñ—Ç–∞—Ü—ñ–π–Ω–∞ –ø—Ä–∞—â–∞\"), —â–æ –¥–æ–∑–≤–æ–ª—è—î –∫–æ—Å–º—ñ—á–Ω–∏–º –º—ñ—Å—ñ—è–º –¥–æ—Å—è–≥–∞—Ç–∏ –≤—ñ–¥–¥–∞–ª–µ–Ω–∏—Ö —Ü—ñ–ª–µ–π –∑ –º–µ–Ω—à–∏–º–∏ –≤–∏—Ç—Ä–∞—Ç–∞–º–∏ –ø–∞–ª–∏–≤–∞.",
                    "4. –ó—ñ–±—Ä–∞–Ω—ñ –¥–∞–Ω—ñ –ø—Ä–æ –ø–æ–≤–µ—Ä—Ö–Ω—é —Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–æ–∂—É—Ç—å –º–∞—Ç–∏ **–ø—Ä–∞–∫—Ç–∏—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è** –¥–ª—è –º–∞–π–±—É—Ç–Ω—ñ—Ö –º—ñ—Å—ñ–π –∑ –≤–∏–¥–æ–±—É—Ç–∫—É —Ä–µ—Å—É—Ä—Å—ñ–≤ (–∫–æ—Å–º—ñ—á–Ω–∏–π –º–∞–π–Ω—ñ–Ω–≥).",
                    "5. –ù–∞–±–ª–∏–∂–µ–Ω–Ω—è –∞—Å—Ç–µ—Ä–æ—ó–¥–∞ –¥–æ–∑–≤–æ–ª—è—î **–≤—ñ–¥–∫–∞–ª—ñ–±—Ä—É–≤–∞—Ç–∏** –∑–µ–º–Ω—ñ —Ç–∞ –∫–æ—Å–º—ñ—á–Ω—ñ —Ç–µ–ª–µ—Å–∫–æ–ø–∏, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –π–æ–≥–æ —è–∫ —Ä—É—Ö–æ–º–∏–π –æ–±'—î–∫—Ç –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ç–æ—á–Ω–æ—Å—Ç—ñ –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è."
                ]
            },
            flyby_future: {
                title: "–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–µ –º–∞–π–±—É—Ç–Ω—î",
                subtitle: "–Ü–Ω–Ω–æ–≤–∞—Ü—ñ—ó, —â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –≤–Ω–∞—Å–ª—ñ–¥–æ–∫ –ø—Ä–æ–ª—å–æ—Ç—ñ–≤",
                image: fixedImages.flyby_future,
                color: 'border-blue-500',
                takes: [
                    "1. –ë–ª–∏–∑—å–∫—ñ –ø—Ä–æ–ª—å–æ—Ç–∏ —Å—Ç–∞—é—Ç—å –∫–∞—Ç–∞–ª—ñ–∑–∞—Ç–æ—Ä–æ–º –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏ **–Ω–æ–≤–∏—Ö –ø–æ–∫–æ–ª—ñ–Ω—å —Å–µ–Ω—Å–æ—Ä—ñ–≤** —ñ –æ–ø—Ç–∏—á–Ω–∏—Ö —Å–∏—Å—Ç–µ–º, –∑–¥–∞—Ç–Ω–∏—Ö –≤–∏—è–≤–ª—è—Ç–∏ –Ω–∞–≤—ñ—Ç—å –¥—Ä—ñ–±–Ω—ñ –æ–±'—î–∫—Ç–∏ –Ω–∞ –≤–µ–ª–∏–∫—ñ–π –≤—ñ–¥—Å—Ç–∞–Ω—ñ.",
                    "2. –Ü–Ω–∂–µ–Ω–µ—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —Ü—ñ –ø–æ–¥—ñ—ó –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è **–∞–≤—Ç–æ–Ω–æ–º–Ω–∏—Ö –Ω–∞–≤—ñ–≥–∞—Ü—ñ–π–Ω–∏—Ö —Å–∏—Å—Ç–µ–º**, –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏—Ö –¥–ª—è –º–∞–π–±—É—Ç–Ω—ñ—Ö –º—ñ–∂–ø–ª–∞–Ω–µ—Ç–Ω–∏—Ö –º—ñ—Å—ñ–π.",
                    "3. –†–æ–∑–≤–∏—Ç–æ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ–π **–∫–æ—Å–º—ñ—á–Ω–∏—Ö —Ç–µ–ª–µ—Å–∫–æ–ø—ñ–≤**, —è–∫—ñ –º–æ–∂—É—Ç—å —Å—Ç–µ–∂–∏—Ç–∏ –∑–∞ –æ–±'—î–∫—Ç–∞–º–∏, —â–æ –Ω–∞–±–ª–∏–∂–∞—é—Ç—å—Å—è, –∑ –º–µ—Ç–æ—é –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó —Ç–æ—á–Ω–æ—Å—Ç—ñ –¥–∞–Ω–∏—Ö.",
                    "4. **–ú—ñ–∂–Ω–∞—Ä–æ–¥–Ω—ñ –ø—Ä–æ—Ç–æ–∫–æ–ª–∏** –æ–±–º—ñ–Ω—É –¥–∞–Ω–∏–º–∏ –º—ñ–∂ –∫–æ—Å–º—ñ—á–Ω–∏–º–∏ –∞–≥–µ–Ω—Ç—Å—Ç–≤–∞–º–∏ (NASA, ESA, JAXA) —Å—Ç–∞—é—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º, –ø—ñ–¥–≤–∏—â—É—é—á–∏ –≥–ª–æ–±–∞–ª—å–Ω—É –±–µ–∑–ø–µ–∫—É.",
                    "5. –£—Å–ø—ñ—à–Ω—ñ –ø—Ä–æ–ª—å–æ—Ç–∏ —Å—Ç–∏–º—É–ª—é—é—Ç—å –ø—É–±–ª—ñ—á–Ω–∏–π —ñ–Ω—Ç–µ—Ä–µ—Å –¥–æ –Ω–∞—É–∫–∏, –∑–∞–ª—É—á–∞—é—á–∏ **–Ω–æ–≤–µ –ø–æ–∫–æ–ª—ñ–Ω–Ω—è** –∞—Å—Ç—Ä–æ–Ω–æ–º—ñ–≤ —Ç–∞ —ñ–Ω–∂–µ–Ω–µ—Ä—ñ–≤."
                ]
            },
            collision_risks: {
                title: "–ú–æ–∂–ª–∏–≤—ñ –Ω–∞—Å–ª—ñ–¥–∫–∏",
                subtitle: "–ì–ª–æ–±–∞–ª—å–Ω—ñ —Ä–∏–∑–∏–∫–∏",
                image: fixedImages.collision_risks,
                color: 'border-red-600', 
                takes: [
                    "1. –£ –≤–∏–ø–∞–¥–∫—É –∑—ñ—Ç–∫–Ω–µ–Ω–Ω—è –∑ –∞—Å—Ç–µ—Ä–æ—ó–¥–æ–º –¥—ñ–∞–º–µ—Ç—Ä–æ–º –ø–æ–Ω–∞–¥ 1 –∫–º –º–æ–∂—É—Ç—å –Ω–∞—Å—Ç–∞—Ç–∏ **–∫–ª—ñ–º–∞—Ç–∏—á–Ω—ñ –∑–º—ñ–Ω–∏**, —Ü—É–Ω–∞–º—ñ —Ç–∞ –º–∞—Å–æ–≤–µ –∑–Ω–∏—â–µ–Ω–Ω—è –µ–∫–æ—Å–∏—Å—Ç–µ–º.",
                    "2. –ü–æ–¥—ñ–±–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó –≤—ñ–¥–æ–º—ñ –∑ –≥–µ–æ–ª–æ–≥—ñ—á–Ω–æ—ó —ñ—Å—Ç–æ—Ä—ñ—ó –ó–µ–º–ª—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø–∞–¥—ñ–Ω–Ω—è –ß–∏–∫—Å—É–ª—É–±—Å—å–∫–æ–≥–æ –∞—Å—Ç–µ—Ä–æ—ó–¥–∞, —â–æ —Å–ø—Ä–∏—á–∏–Ω–∏–ª–æ **–≤–∏–º–∏—Ä–∞–Ω–Ω—è –¥–∏–Ω–æ–∑–∞–≤—Ä—ñ–≤**).",
                    "3. –£ —Ä–∞–∑—ñ –ø–∞–¥—ñ–Ω–Ω—è, –≤ –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –±—É–¥–µ –≤–∏–∫–∏–Ω—É—Ç–æ –≤–µ–ª–∏—á–µ–∑–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–∏–ª—É —Ç–∞ –ø–æ–ø–µ–ª—É, —â–æ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ **\"—É–¥–∞—Ä–Ω–æ—ó –∑–∏–º–∏\"** —Ç–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä—É—à–µ–Ω–Ω—è —Å—ñ–ª—å—Å—å–∫–æ–≥–æ—Å–ø–æ–¥–∞—Ä—Å—å–∫–∏—Ö —Ü–∏–∫–ª—ñ–≤.",
                    "4. –ù–∞–≤—ñ—Ç—å –ø–∞–¥—ñ–Ω–Ω—è —É –°–≤—ñ—Ç–æ–≤–∏–π –æ–∫–µ–∞–Ω –≤–∏–∫–ª–∏—á–µ **–º–µ–≥–∞—Ü—É–Ω–∞–º—ñ** —Ç–∞ –≥–ª–æ–±–∞–ª—å–Ω–µ –∑–∞–±—Ä—É–¥–Ω–µ–Ω–Ω—è –ø—Ä–∏–±–µ—Ä–µ–∂–Ω–∏—Ö –∑–æ–Ω, —â–æ –≤–ø–ª–∏–Ω–µ –Ω–∞ –º—ñ–ª—å—è—Ä–¥–∏ –ª—é–¥–µ–π.",
                    "5. **–ï–ª–µ–∫—Ç—Ä–æ–º–∞–≥–Ω—ñ—Ç–Ω–∏–π —ñ–º–ø—É–ª—å—Å** –≤—ñ–¥ –≤–∏–±—É—Ö—É –º–æ–∂–µ –≤–∏–≤–µ—Å—Ç–∏ –∑ –ª–∞–¥—É —Å—É–ø—É—Ç–Ω–∏–∫–∏ —Ç–∞ –Ω–∞–∑–µ–º–Ω—ñ —Å–∏—Å—Ç–µ–º–∏ –∑–≤‚Äô—è–∑–∫—É, —Å–ø—Ä–∏—á–∏–Ω–∏–≤—à–∏ —Ö–∞–æ—Å —É –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è—Ö."
                ]
            },
            collision_prep: {
                title: "–ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –ª—é–¥—Å—Ç–≤–∞",
                subtitle: "–ù–∞—É–∫–æ–≤—ñ –π —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω—ñ —Ä—ñ—à–µ–Ω–Ω—è",
                image: fixedImages.collision_prep,
                color: 'border-red-600',
                takes: [
                    "1. –°—É—á–∞—Å–Ω—ñ –ø—Ä–æ–≥—Ä–∞–º–∏, —Ç–∞–∫—ñ —è–∫ NASA DART, –¥–µ–º–æ–Ω—Å—Ç—Ä—É—é—Ç—å –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ **–≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è —Ç—Ä–∞—î–∫—Ç–æ—Ä—ñ—ó** –∞—Å—Ç–µ—Ä–æ—ó–¥–∞ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫—ñ–Ω–µ—Ç–∏—á–Ω–æ–≥–æ —É–¥–∞—Ä—É. –†–æ–∑–≤–∏—Ç–æ–∫ —Ç–∞–∫–∏—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ–π —î –∫–ª—é—á–µ–º –¥–æ –∑–∞—Ö–∏—Å—Ç—É.",
                    "2. –ú—ñ–∂–Ω–∞—Ä–æ–¥–Ω–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü—ñ—è —Ç–∞ —ñ–Ω–≤–µ—Å—Ç–∏—Ü—ñ—ó —É **–∫–æ—Å–º—ñ—á–Ω—É –æ–±–æ—Ä–æ–Ω—É** (Planetary Defense) —î –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–º–∏ –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ—ñ, –æ—Å–∫—ñ–ª—å–∫–∏ —Ü–µ –≤–∏–º–∞–≥–∞—î –≥–ª–æ–±–∞–ª—å–Ω–∏—Ö –∑—É—Å–∏–ª—å.",
                    "3. –ñ–∏—Ç—Ç—î–≤–æ –≤–∞–∂–ª–∏–≤–∏–º –∞—Å–ø–µ–∫—Ç–æ–º —î —Ä–æ–∑—Ä–æ–±–∫–∞ —Å–∏—Å—Ç–µ–º **—Ä–∞–Ω–Ω—å–æ–≥–æ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è** —Ç–∞ –ø–ª–∞–Ω—ñ–≤ –∑–∞—Ö–∏—Å—Ç—É –∫—Ä–∏—Ç–∏—á–Ω–æ—ó —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏, —â–æ –¥–æ–∑–≤–æ–ª–∏—Ç—å –µ–≤–∞–∫—É—é–≤–∞—Ç–∏ –Ω–∞—Å–µ–ª–µ–Ω–Ω—è –∑ –Ω–∞–π–±—ñ–ª—å—à —ñ–º–æ–≤—ñ—Ä–Ω–æ—ó –∑–æ–Ω–∏ —É—Ä–∞–∂–µ–Ω–Ω—è.",
                    "4. –ü—Ä–æ–≤–æ–¥—è—Ç—å—Å—è –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —â–æ–¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è **–≥—Ä–∞–≤—ñ—Ç–∞—Ü—ñ–π–Ω–æ–≥–æ —Ç—è–≥–∞—á–∞** ‚Äî –º–µ—Ç–æ–¥ –ø–æ–≤—ñ–ª—å–Ω–æ—ó –∑–º—ñ–Ω–∏ –æ—Ä–±—ñ—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –≥—Ä–∞–≤—ñ—Ç–∞—Ü—ñ—ó –∫–æ—Å–º—ñ—á–Ω–æ–≥–æ –∞–ø–∞—Ä–∞—Ç–∞, —â–æ –ª–µ—Ç–∏—Ç—å –ø–æ—Ä—É—á.",
                    "5. –ù–µ–æ–±—Ö—ñ–¥–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ **—Ä–µ–∑–µ—Ä–≤–Ω—ñ —Å–∏—Å—Ç–µ–º–∏** –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–∞ –ø—Ä–æ–¥–æ–≤–æ–ª—å—Å—Ç–≤–∞ (–ø—ñ–¥–∑–µ–º–Ω—ñ —Ñ–µ—Ä–º–∏, –∑–∞–∫—Ä–∏—Ç—ñ –µ–∫–æ—Å–∏—Å—Ç–µ–º–∏) –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –≤–∏–∂–∏–≤–∞–Ω–Ω—è –Ω–∞—Å–µ–ª–µ–Ω–Ω—è –ø—ñ—Å–ª—è –ø–µ—Ä–≤–∏–Ω–Ω–æ–≥–æ —É–¥–∞—Ä—É —Ç–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –∫–ª—ñ–º–∞—Ç–∏—á–Ω–∏—Ö –∑–º—ñ–Ω."
                ]
            },
            collision_planning: {
                title: "–î–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–µ –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è",
                subtitle: "–°—Ç—Ä–∞—Ç–µ–≥—ñ—ó –≤–∏–∂–∏–≤–∞–Ω–Ω—è —Ç–∞ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è",
                image: fixedImages.collision_planning,
                color: 'border-red-600',
                takes: [
                    "1. –ú—ñ–∂–Ω–∞—Ä–æ–¥–Ω—ñ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó —Ä–æ–∑—Ä–æ–±–ª—è—é—Ç—å **–≥–ª–æ–±–∞–ª—å–Ω—ñ –ø–ª–∞–Ω–∏ –µ–≤–∞–∫—É–∞—Ü—ñ—ó —Ç–∞ –ø–µ—Ä–µ—Ä–æ–∑–ø–æ–¥—ñ–ª—É** —Ä–µ—Å—É—Ä—Å—ñ–≤ —É —Ä–∞–∑—ñ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –Ω–µ–º–∏–Ω—É—á–æ–≥–æ –∑—ñ—Ç–∫–Ω–µ–Ω–Ω—è.",
                    "2. –°—Ç–≤–æ—Ä—é—é—Ç—å—Å—è **–ø—ñ–¥–∑–µ–º–Ω—ñ —Å—Ö–æ–≤–∏—â–∞** (—Å—ñ–º–µ–Ω—ñ, –∫—É–ª—å—Ç—É—Ä–Ω—ñ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∏, –∑–Ω–∞–Ω–Ω—è) –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ª—é–¥—Å—å–∫–æ—ó —Ü–∏–≤—ñ–ª—ñ–∑–∞—Ü—ñ—ó —Ç–∞ –±—ñ–æ—Ä—ñ–∑–Ω–æ–º–∞–Ω—ñ—Ç—Ç—è.",
                    "3. –ñ–∏—Ç—Ç—î–≤–æ –≤–∞–∂–ª–∏–≤–∏–º —î –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è **–µ–Ω–µ—Ä–≥–µ—Ç–∏—á–Ω–æ—ó –∞–≤—Ç–æ–Ω–æ–º—ñ—ó** —Ç–∏—Ö —Ä–µ–≥—ñ–æ–Ω—ñ–≤, —è–∫—ñ –º–æ–∂—É—Ç—å –ø–µ—Ä–µ–∂–∏—Ç–∏ –ø–µ—Ä–≤–∏–Ω–Ω–∏–π —É–¥–∞—Ä, –¥–ª—è –ø—Ä–∏—Å–∫–æ—Ä–µ–Ω–Ω—è –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è.",
                    "4. –ü–ª–∞–Ω–∏ –≤–∫–ª—é—á–∞—é—Ç—å —Ä–æ–∑—Ä–æ–±–∫—É **—Å—Ç—ñ–π–∫–∏—Ö –¥–æ –∫–ª—ñ–º–∞—Ç—É** –∫—É–ª—å—Ç—É—Ä —ñ –º–µ—Ç–æ–¥—ñ–≤ —Å—ñ–ª—å—Å—å–∫–æ–≥–æ –≥–æ—Å–ø–æ–¥–∞—Ä—Å—Ç–≤–∞, —â–æ–± –ø—Ä–æ—Ç–∏—Å—Ç–æ—è—Ç–∏ \"—É–¥–∞—Ä–Ω—ñ–π –∑–∏–º—ñ\"..",
                    "5. –ó–∞–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è **–≥–ª–æ–±–∞–ª—å–Ω–∏—Ö —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–∏—Ö —Ñ–æ–Ω–¥—ñ–≤** –¥–ª—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü—ñ—ó –∑–±–∏—Ç–∫—ñ–≤ —Ç–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü—ñ—ó –∑—É—Å–∏–ª—å –∑ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—ñ—Å–ª—è –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∏."
                ]
            }
        };

        // --- HTML UTILITY FUNCTIONS ---

        function responsiveImageHTML(src, alt) {
            return `
                <img
                    src="${src}"
                    alt="${alt}"
                    onerror="this.onerror=null; this.src='${defaultImage}';"
                    class="object-cover w-full h-48 image-slight-rounded transition-transform hover:scale-105"
                />
            `;
        }

        function takeCardHTML(text) {
            // –ó–∞–º—ñ–Ω–∞ **—Ç–µ–∫—Å—Ç** –Ω–∞ <strong>—Ç–µ–∫—Å—Ç</strong>
            const boldText = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            return `
                <div class="p-4 bg-slate-50 border border-slate-200 rounded-lg shadow-sm text-lg text-slate-700">
                    ${boldText}
                </div>
            `;
        }

        function predictionTriggerCardHTML(sectionId, title, subtitle, image, colorClass) {
            return `
                <div data-section-id="${sectionId}" 
                     class="bg-white rounded-2xl shadow-xl hover:shadow-2xl transition duration-300 p-6 space-y-3 cursor-pointer border-t-8 ${colorClass} trigger-card">
                    
                    <div class="overflow-hidden mb-3">
                        ${responsiveImageHTML(image, title)}
                    </div>
                    
                    <h3 class="text-xl font-semibold text-slate-800">${title}</h3>
                    ${subtitle ? `<p class="text-sm text-slate-500">${subtitle}</p>` : ''}
                    <p class="text-sm text-blue-600 font-bold mt-2 hover:underline">–î–µ—Ç–∞–ª—å–Ω—ñ —Ç–µ–π–∫–∏ (5 —à—Ç.) ‚Üí</p>
                </div>
            `;
        }
        
        function getModalContentHTML(data) {
            const takesHTML = data.takes.map(take => takeCardHTML(take)).join('');

            return `
                <div class="modal-content-inner-wrapper">
                    <div class="space-y-6 pb-10"> 
                        <h2 class="text-3xl font-bold text-slate-800 border-b pb-2 mb-4">${data.title}</h2>
                        <p class="text-xl text-slate-600">${data.subtitle}</p>
                        <div class="overflow-hidden mb-4">
                            <img
                                src="${data.image}"
                                alt="${data.title}"
                                onerror="this.onerror=null; this.src='${defaultImage}';"
                                class="object-cover w-full h-80 shadow-lg image-slight-rounded"
                            />
                        </div>
                        <div class="space-y-4">
                            ${takesHTML}
                        </div>
                    </div>
                </div>
            `;
        }
        
        // --- IMPAKTOR SUB-PAGES ---
        const flybyPageHTML = `
            <div class="space-y-10">
                <h2 class="text-3xl font-bold text-blue-700">–ü—Ä–æ–≥–Ω–æ–∑: –ü—Ä–æ–ª—ñ—Ç –∞—Å—Ç–µ—Ä–æ—ó–¥–∞ –ø–æ–≤–∑ –ó–µ–º–ª—é</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto">
                    ${predictionTriggerCardHTML('flyby_calcs', predictionData.flyby_calcs.title, predictionData.flyby_calcs.subtitle, predictionData.flyby_calcs.image, 'border-blue-500')}
                    ${predictionTriggerCardHTML('flyby_benefits', predictionData.flyby_benefits.title, predictionData.flyby_benefits.subtitle, predictionData.flyby_benefits.image, 'border-blue-500')}
                    ${predictionTriggerCardHTML('flyby_future', predictionData.flyby_future.title, predictionData.flyby_future.subtitle, predictionData.flyby_future.image, 'border-blue-500')}
                </div>
            </div>
        `;

        const collisionPageHTML = `
            <div class="space-y-10">
                <h2 class="text-3xl font-bold text-red-700">–ü—Ä–æ–≥–Ω–æ–∑: –ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–µ –∑—ñ—Ç–∫–Ω–µ–Ω–Ω—è –∑ –∞—Å—Ç–µ—Ä–æ—ó–¥–æ–º</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto">
                    ${predictionTriggerCardHTML('collision_risks', predictionData.collision_risks.title, predictionData.collision_risks.subtitle, predictionData.collision_risks.image, 'border-red-600')}
                    ${predictionTriggerCardHTML('collision_prep', predictionData.collision_prep.title, predictionData.collision_prep.subtitle, predictionData.collision_prep.image, 'border-red-600')}
                    ${predictionTriggerCardHTML('collision_planning', predictionData.collision_planning.title, predictionData.collision_planning.subtitle, predictionData.collision_planning.image, 'border-red-600')}
                </div>
            </div>
        `;

        // --- METEORITE INFO CONTENT ---
        const meteoriteInfoHTML = `
            <h2 class="text-3xl font-bold text-slate-800 mb-6 border-b pb-2">–ó–∞–≥–∞–ª—å–Ω—ñ –≤—ñ–¥–æ–º–æ—Å—Ç—ñ –ø—Ä–æ –º–µ—Ç–µ–æ—Ä–∏—Ç–∏</h2>

            <section class="space-y-5 text-lg text-slate-700">
                <h3 class="text-2xl font-semibold text-sky-800 border-b pb-1">–©–æ —Ç–∞–∫–µ –º–µ—Ç–µ–æ—Ä–∏—Ç?</h3>
                <p><strong>–ú–µ—Ç–µ–æ—Ä–æ—ó–¥</strong> ‚Äî —Ü–µ –∫–æ—Å–º—ñ—á–Ω–µ —Ç—ñ–ª–æ (–∫–∞–º‚Äô—è–Ω–µ, –º–µ—Ç–∞–ª–µ–≤–µ –∞–±–æ —Å—É–º—ñ—à –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤), —è–∫–µ —Ä—É—Ö–∞—î—Ç—å—Å—è —É –º—ñ–∂–ø–ª–∞–Ω–µ—Ç–Ω–æ–º—É –ø—Ä–æ—Å—Ç–æ—Ä—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —É–ª–∞–º–æ–∫ –∞—Å—Ç–µ—Ä–æ—ó–¥–∞ –∞–±–æ –∫–æ–º–µ—Ç–∏).</p>
                <p><strong>–ú–µ—Ç–µ–æ—Ä</strong> ‚Äî —Ü–µ —Å–≤—ñ—Ç–ª–æ–≤–∏–π —Å–ª—ñ–¥, —â–æ –≤–∏–¥–Ω–æ —É –Ω–µ–±—ñ, –∫–æ–ª–∏ –º–µ—Ç–µ–æ—Ä–æ—ó–¥ –≤—Ö–æ–¥–∏—Ç—å –≤ –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –ó–µ–º–ª—ñ —ñ –ø–æ—á–∏–Ω–∞—î –∑–≥–æ—Ä–∞—Ç–∏ —á–µ—Ä–µ–∑ —Ç–µ—Ä—Ç—è (—Ä–æ–∑–∂–∞—Ä–µ–Ω–Ω—è).</p>
                <p><strong>–ú–µ—Ç–µ–æ—Ä–∏—Ç</strong> ‚Äî —Ü–µ —Ç–æ–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –º–µ—Ç–µ–æ—Ä–æ—ó–¥–∞, —è–∫–∏–π –ø–µ—Ä–µ–∂–∏–≤ —à–ª—è—Ö —á–µ—Ä–µ–∑ –∞—Ç–º–æ—Å—Ñ–µ—Ä—É —ñ –≤–ø–∞–≤ –Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω—é –ó–µ–º–ª—ñ (–∞–±–æ —ñ–Ω—à–æ—ó –ø–ª–∞–Ω–µ—Ç–∏ –∞–±–æ —Å—É–ø—É—Ç–Ω–∏–∫–∞).</p>
                <p class="font-medium mt-4">–¢–∞–∫–∏–º —á–∏–Ω–æ–º, –º–µ—Ç–µ–æ—Ä ‚Äî —Ü–µ –ø—Ä–æ—Ü–µ—Å (—Å–≤—ñ—Ç–ª–æ–≤–µ —è–≤–∏—â–µ), –∞ –º–µ—Ç–µ–æ—Ä–∏—Ç ‚Äî —Ü–µ –æ–±‚Äô—î–∫—Ç, —è–∫–∏–π –∑–∞–ª–∏—à–∏–≤—Å—è.</p>
            </section>
            
            <section class="space-y-5 text-lg text-slate-700">
                <h3 class="text-2xl font-semibold text-sky-800 border-b pb-1">–í—ñ–∫, –ø–æ—Ö–æ–¥–∂–µ–Ω–Ω—è —Ç–∞ —Ö—ñ–º—ñ—á–Ω–∏–π —Å–∫–ª–∞–¥</h3>

                <h4 class="text-xl font-semibold text-blue-700">–í—ñ–∫</h4>
                <ul class="list-disc list-inside space-y-2 ml-4">
                    <li>–ë–∞–≥–∞—Ç–æ –º–µ—Ç–µ–æ—Ä–∏—Ç—ñ–≤, –æ—Å–æ–±–ª–∏–≤–æ —Ç—ñ, —â–æ –ø–æ—Ö–æ–¥—è—Ç—å –∑ –∞—Å—Ç–µ—Ä–æ—ó–¥—ñ–≤, –º–∞—é—Ç—å –≤—ñ–∫ –ø—Ä–∏–±–ª–∏–∑–Ω–æ <strong>4,5 –º—ñ–ª—å—è—Ä–¥–∞ —Ä–æ–∫—ñ–≤</strong> ‚Äî —Ç–æ–±—Ç–æ –≤–æ–Ω–∏ —Å—Ñ–æ—Ä–º—É–≤–∞–ª–∏—Å—è –Ω–∞ —Å–∞–º–æ–º—É –ø–æ—á–∞—Ç–∫—É –°–æ–Ω—è—á–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏.</li>
                    <li>–î–µ—è–∫—ñ –≤–∫–ª—é—á–µ–Ω–Ω—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –º–µ—Ç–µ–æ—Ä–∏—Ç—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–∞–ª—å—Ü—ñ–π-–∞–ª—é–º—ñ–Ω—ñ—î–≤—ñ –≤–∫–ª—é—á–µ–Ω–Ω—è, CAI) –±—É–ª–∏ –¥–∞—Ç–æ–≤–∞–Ω—ñ –±–ª–∏–∑—å–∫–æ <strong>4,56 –º—ñ–ª—å—è—Ä–¥–∞ —Ä–æ–∫—ñ–≤</strong> ‚Äî —Ü–µ –æ–¥–Ω—ñ –∑ –Ω–∞–π–¥–∞–≤–Ω—ñ—à–∏—Ö –≤—ñ–¥–æ–º–∏—Ö —Ç–≤–µ—Ä–¥—ñ —Ä–µ—á–æ–≤–∏–Ω–∏ —É –°–æ–Ω—è—á–Ω—ñ–π —Å–∏—Å—Ç–µ–º—ñ.</li>
                    <li>–Ø–∫—â–æ –º–µ—Ç–µ–æ—Ä–∏—Ç –ø–æ—Ö–æ–¥–∏—Ç—å –∑ –ú—ñ—Å—è—Ü—è –∞–±–æ –ú–∞—Ä—Å–∞, —Ç–æ –π–æ–≥–æ –≤—ñ–∫ –º–æ–∂–µ –±—É—Ç–∏ –º–µ–Ω—à–∏–º, –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ —ñ—Å—Ç–æ—Ä—ñ—ó —ó—Ö–Ω—å–æ—ó –≥–µ–æ–ª–æ–≥—ñ—ó.</li>
                </ul>
                <h4 class="text-xl font-semibold text-blue-700 mt-5">–ü–æ—Ö–æ–¥–∂–µ–Ω–Ω—è</h4>
                <ul class="list-disc list-inside space-y-2 ml-4">
                    <li>–ë—ñ–ª—å—à—ñ—Å—Ç—å –º–µ—Ç–µ–æ—Ä–∏—Ç—ñ–≤ –ø–æ—Ö–æ–¥–∏—Ç—å –≤—ñ–¥ <strong>–∞—Å—Ç–µ—Ä–æ—ó–¥—ñ–≤</strong>, –æ—Å–æ–±–ª–∏–≤–æ –∑ –ø–æ—è—Å—É –∞—Å—Ç–µ—Ä–æ—ó–¥—ñ–≤ –º—ñ–∂ –ú–∞—Ä—Å–æ–º —ñ –Æ–ø—ñ—Ç–µ—Ä–æ–º.</li>
                    <li>–î–µ—è–∫—ñ —Ä—ñ–¥–∫—ñ—Å–Ω—ñ –º–µ—Ç–µ–æ—Ä–∏—Ç–∏ –ø–æ—Ö–æ–¥—è—Ç—å –∑ <strong>–ú—ñ—Å—è—Ü—è –∞–±–æ –ú–∞—Ä—Å–∞</strong>, –∫–æ–ª–∏ —É–¥–∞—Ä–Ω—ñ –ø–æ–¥—ñ—ó –≤–∏–∫–∏–¥–∞—é—Ç—å –º–∞—Ç–µ—Ä—ñ–∞–ª —É –∫–æ—Å–º–æ—Å, —è–∫–∏–π –ø—ñ–∑–Ω—ñ—à–µ –ø–∞–¥–∞—î –Ω–∞ –ó–µ–º–ª—é.</li>
                    <li>–¢—ñ–ª–æ-–¥–∂–µ—Ä–µ–ª–æ –º–µ—Ç–µ–æ—Ä–∏—Ç–∞ –º–æ–∂–µ –±—É—Ç–∏ ¬´–¥–∏—Ñ–µ—Ä–µ–Ω—Ü—ñ–π–æ–≤–∞–Ω–∏–º¬ª ‚Äî —Ç–æ–±—Ç–æ –∫–æ–ª–∏—Å—å —Ä–æ–∑–ø–ª–∞–≤–ª–µ–Ω–∏–º (–º–∞—î —è–¥—Ä–æ, –º–∞–Ω—Ç—ñ—é) ‚Äî –∞–±–æ ¬´–ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–∏–º¬ª ‚Äî –Ω–µ –∑–∞–∑–Ω–∞–ª–æ –∑–Ω–∞—á–Ω–æ–≥–æ –ø–µ—Ä–µ–ø–ª–∞–≤–ª–µ–Ω–Ω—è.</li>
                </ul>
                <h4 class="text-xl font-semibold text-blue-700 mt-5">–•—ñ–º—ñ—á–Ω–∏–π —Å–∫–ª–∞–¥, –º—ñ–Ω–µ—Ä–∞–ª–∏ —Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞</h4>
                <p>–ú–µ—Ç–µ–æ—Ä–∏—Ç–∏ –∫–ª–∞—Å–∏—Ñ—ñ–∫—É—é—Ç—å—Å—è –∑–∞ —ó—Ö–Ω—ñ–º —Ö—ñ–º—ñ—á–Ω–∏–º —Ç–∞ –º—ñ–Ω–µ—Ä–∞–ª–æ–≥—ñ—á–Ω–∏–º —Å–∫–ª–∞–¥–æ–º. –û—Å–Ω–æ–≤–Ω—ñ –≥—Ä—É–ø–∏:</p>
                <div class="overflow-x-auto">
                    <table class="min-w-full text-lg border-collapse table-auto border border-slate-300">
                        <thead>
                            <tr class="bg-blue-50 text-sky-800 border-b-2 border-slate-200">
                                <th class="p-4 text-left border border-slate-300">–ì—Ä—É–ø–∞ / —Ç–∏–ø</th>
                                <th class="p-4 text-left border border-slate-300">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞</th>
                                <th class="p-4 text-left border border-slate-300">–ü—Ä–∏–∫–ª–∞–¥–∏ / –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b border-slate-100">
                                <td class="p-4 font-medium border border-slate-300 align-top">–ö–∞–º‚Äô—è–Ω—ñ (stony)</td>
                                <td class="p-4 border border-slate-300 align-top">–°–∫–ª–∞–¥: —Å–∏–ª—ñ–∫–∞—Ç–∏ (–∫—Ä–µ–º–Ω–µ–∑–µ–º–∏, –æ–ª—ñ–≤—ñ–Ω, –ø–∏—Ä–æ–∫—Å–µ–Ω–∏), –∑ –¥–æ–º—ñ—à–∫–∞–º–∏ –º–µ—Ç–∞–ª—É</td>
                                <td class="p-4 border border-slate-300 align-top">~95 % –º–µ—Ç–µ–æ—Ä–∏—Ç—ñ–≤, —â–æ –ø–∞–¥–∞—é—Ç—å –Ω–∞ –ó–µ–º–ª—é.</td>
                            </tr>
                            <tr class="bg-slate-50">
                                <td class="p-4 font-medium border border-slate-300 align-top pl-8">‚Äî –•–æ–Ω–¥—Ä–∏—Ç–∏—á–Ω—ñ (chondrites)</td>
                                <td class="p-4 border border-slate-300 align-top">–ú—ñ—Å—Ç—è—Ç—å <strong>—Ö–æ–Ω–¥—Ä–∏</strong> ‚Äî –∫—Ä—É–≥–ª—ñ –º—ñ–∫—Ä–æ—É—Ç–≤–æ—Ä–µ–Ω–Ω—è, –Ω–µ –ø–ª–∞–≤–∏–ª–∏—Å—è –ø–æ–≤–Ω—ñ—Å—Ç—é.</td>
                                <td class="p-4 border border-slate-300 align-top">–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –º–µ—Ç–µ–æ—Ä–∏—Ç Allende ‚Äî –∫–∞—Ä–±–æ–Ω–∞—Ç-—Ö–æ–Ω–¥—Ä–∏—Ç CV3.</td>
                            </tr>
                            <tr>
                                <td class="p-4 font-medium border border-slate-300 align-top pl-8">‚Äî –ê—Ö–æ–Ω–¥—Ä–∏—Ç–∏—á–Ω—ñ (achondrites)</td>
                                <td class="p-4 border border-slate-300 align-top">–ë—ñ–ª—å—à–µ –ø–æ–¥—ñ–±–Ω—ñ –¥–æ –≤—É–ª–∫–∞–Ω—ñ—á–Ω–∏—Ö –ø–æ—Ä—ñ–¥, –±—É–ª–∏ –ø–µ—Ä–µ–ø–ª–∞–≤–ª–µ–Ω—ñ –Ω–∞ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–º—É —Ç—ñ–ª—ñ.</td>
                                <td class="p-4 border border-slate-300 align-top">–ú–æ–∂—É—Ç—å –ø–æ—Ö–æ–¥–∏—Ç–∏ –∑ –∞—Å—Ç–µ—Ä–æ—ó–¥—ñ–≤, –ú—ñ—Å—è—Ü—è —á–∏ –ú–∞—Ä—Å–∞.</td>
                            </tr>
                            <tr class="bg-slate-50">
                                <td class="p-4 font-medium border border-slate-300 align-top">–ó–∞–ª—ñ–∑–Ω—ñ (iron)</td>
                                <td class="p-4 border border-slate-300 align-top">–ü–µ—Ä–µ–≤–∞–∂–Ω–æ <strong>–∑–∞–ª—ñ–∑–æ-–Ω—ñ–∫–µ–ª—å</strong>, —ñ–Ω–æ–¥—ñ —Å—É–ª—å—Ñ—ñ–¥–∏ —Ç–∞ –∫–∞—Ä–±—ñ–¥–∏.</td>
                                <td class="p-4 border border-slate-300 align-top">–ú–∞—é—Ç—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É <strong>–í—ñ–¥–º–∞–Ω—à—Ç–µ—Ç—Ç–µ–Ω–∞</strong> –ø—Ä–∏ —Ç—Ä–∞–≤–ª–µ–Ω–Ω—ñ –∫–∏—Å–ª–æ—Ç–∞–º–∏.</td>
                            </tr>
                            <tr>
                                <td class="p-4 font-medium border border-slate-300 align-top">–ö–∞–º‚Äô—è–Ω–æ-–º–µ—Ç–∞–ª—ñ—á–Ω—ñ (stony-iron)</td>
                                <td class="p-4 border border-slate-300 align-top">–°—É–º—ñ—à –º–µ—Ç–∞–ª—É –π —Å–∏–ª—ñ–∫–∞—Ç—ñ–≤.</td>
                                <td class="p-4 border border-slate-300 align-top">–ù–∞–ø—Ä–∏–∫–ª–∞–¥, <strong>–ø–∞–ª–ª–∞–∑–∏—Ç–∏</strong> ‚Äî –º–µ—Ç–∞–ª + –∫—Ä–∏—Å—Ç–∞–ª–∏ –æ–ª—ñ–≤—ñ–Ω—É.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section class="space-y-5 text-lg text-slate-700">
                <h3 class="text-2xl font-semibold text-sky-800 border-b pb-1">–í–∏–≤—á–µ–Ω–Ω—è –º–µ—Ç–µ–æ—Ä–∏—Ç—ñ–≤ (3D-–º–æ–¥–µ–ª—ñ)</h3>
                <p>–û—Å—å –∫—ñ–ª—å–∫–∞ –ø—Ä–∏–∫–ª–∞–¥—ñ–≤ –º–µ—Ç–µ–æ—Ä–∏—Ç—ñ–≤, —è–∫—ñ –º–æ–∂–Ω–∞ –¥–æ—Å–ª—ñ–¥–∏—Ç–∏ —É 3D. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –∫–∞—Ä—Ç–∫—É, —â–æ–± –≤—ñ–¥–∫—Ä–∏—Ç–∏ –º–æ–¥–µ–ª—å —Ç–∞ –¥—ñ–∑–Ω–∞—Ç–∏—Å—è –±—ñ–ª—å—à–µ:</p>
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 pt-2">
                    <div data-model-id="allende" class="card-3d">
                        <div class="card-3d-inner">
                            <h4 class="text-xl font-semibold mb-2">Allende (–ú–µ–∫—Å–∏–∫–∞, 1969) </h4>
                            <p class="text-sm text-slate-500"> –û–¥–∏–Ω –∑ –Ω–∞–π–≤—ñ–¥–æ–º—ñ—à–∏—Ö –∫–∞—Ä–±–æ–Ω–∞—Ç-—Ö–æ–Ω–¥—Ä–∏—Ç—ñ–≤. –ü—ñ—Å–ª—è –ø–∞–¥—ñ–Ω–Ω—è –∑—ñ–±—Ä–∞–ª–∏ –ø–æ–Ω–∞–¥ 2 —Ç–æ–Ω–Ω–∏ —É–ª–∞–º–∫—ñ–≤. –í—ñ–Ω –º–∞—î —á–∏—Å–ª–µ–Ω–Ω—ñ –∫–∞–ª—å—Ü—ñ–π-–∞–ª—é–º—ñ–Ω—ñ—î–≤—ñ –≤–∫–ª—é—á–µ–Ω–Ω—è (CAI), —â–æ –¥–æ—Å–ª—ñ–¥–∂—É—é—Ç—å—Å—è –¥–ª—è —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ä–∞–Ω–Ω—å–æ–≥–æ –°–æ–Ω—è—á–Ω–æ–≥–æ –¥–∏—Å–∫–∞. </p>
                            <div id="allende-viewer" class="model-placeholder">
                                <iframe src="https://sketchfab.com/models/d5f0b9a370ea407c8751e4874dd60ae4/embed" width="100%" height="200" allowfullscreen></iframe>
                            </div>
                        </div>
                    </div>
                    <div data-model-id="gibeon" class="card-3d">
                        <div class="card-3d-inner">
                            <h4 class="text-xl font-semibold mb-2">Gibeon (–ù–∞–º—ñ–±—ñ—è)</h4>
                            <p class="text-sm text-slate-500">–ó–∞–ª—ñ–∑–Ω–∏–π –º–µ—Ç–µ–æ—Ä–∏—Ç –≥—Ä—É–ø–∏ IVA (—Ç–æ–Ω–∫–æ–∫—Ä–∏—Å—Ç–∞–ª—ñ—á–Ω–∏–π –æ–∫—Ç–æ–¥—Ä–∏—Ç). –ú–µ–ª–æ–¥—ñ—è –í—ñ–¥–º–∞–Ω—à—Ç–µ—Ç—Ç–µ–Ω–∞ –≤–∏–¥–Ω–æ –Ω–∞ –∑—Ä—ñ–∑–∞—Ö –ø—Ä–∏ —Ç—Ä–∞–≤–ª–µ–Ω–Ω—ñ. </p>
                            <div id="gibeon-viewer" class="model-placeholder">
                                <iframe src="https://sketchfab.com/models/5d50d90d582c4afab1bf715f9fcadf6c/embed" width="100%" height="200" allowfullscreen></iframe>
                            </div>
                        </div>
                    </div>
                    <div data-model-id="capeyork" class="card-3d">
                        <div class="card-3d-inner">
                            <h4 class="text-xl font-semibold mb-2">Cape York (–ì—Ä–µ–Ω–ª–∞–Ω–¥—ñ—è)</h4>
                            <p class="text-sm text-slate-500">–û–¥–∏–Ω —ñ–∑ –Ω–∞–π–±—ñ–ª—å—à–∏—Ö –∑–∞–ª—ñ–∑–Ω–∏—Ö –º–µ—Ç–µ–æ—Ä–∏—Ç—ñ–≤: –∑–∞–≥–∞–ª—å–Ω–∞ –º–∞—Å–∞ –≤–∏–ª—É—á–µ–Ω–∏—Ö —É–ª–∞–º–∫—ñ–≤ ‚Äî ~58 —Ç–æ–Ω–Ω. </p>
                            <div id="capeyork-viewer" class="model-placeholder">
                                <iframe src="https://sketchfab.com/models/6cdb0d058ac244a3baf2f7a10d835a51/embed" width="100%" height="200" allowfullscreen></iframe>
                            </div>
                        </div>
                    </div>
                    <div data-model-id="kaba" class="card-3d">
                        <div class="card-3d-inner">
                            <h4 class="text-xl font-semibold mb-2">Kaba (–£–≥–æ—Ä—â–∏–Ω–∞, 1857) </h4>
                            <p class="text-sm text-slate-500">–ö–∞–º‚Äô—è–Ω–∏–π –º–µ—Ç–µ–æ—Ä–∏—Ç (CV3), —É —è–∫–æ–º—É –≤–ø–µ—Ä—à–µ –≤–∏—è–≤–∏–ª–∏ –æ—Ä–≥–∞–Ω—ñ—á–Ω—ñ —Ä–µ—á–æ–≤–∏–Ω–∏ (–≤—É–≥–ª–µ—Ü—å ~2 %). </p>
                            <div id="kaba-viewer" class="model-placeholder">
                                <iframe src="https://sketchfab.com/models/249c97f25b9e4502b7c641792e4b7710/embed" width="100%" height="200" allowfullscreen></iframe>
                            </div>
                        </div>
                    </div>
                    <div data-model-id="krasnojarsk" class="card-3d">
                        <div class="card-3d-inner">
                            <h4 class="text-xl font-semibold mb-2">Krasnojarsk (–ü–∞–ª–ª–∞—Å–∏—Ç, –∑–Ω–∞–π–¥–µ–Ω–∏–π 1749 —Ä–æ–∫—É, —Ä–æ—Å—ñ—è / –°–∏–±—ñ—Ä)</h4>
                            <p class="text-sm text-slate-500">–ë—É–≤ –ø–µ—Ä—à–æ—é –ø–∞–ª–ª–∞—Å–∏—Ç–Ω–æ—é –∑–Ω–∞—Ö—ñ–¥–∫–æ—é. –ü–∞–ª–ª–∞—Å–∏—Ç–∏ ‚Äî –æ—Å–æ–±–ª–∏–≤–∏–π —Ç–∏–ø –∫–∞–º‚Äô—è–Ω–æ-–º–µ—Ç–∞–ª—ñ—á–Ω–æ–≥–æ –º–µ—Ç–µ–æ—Ä–∏—Ç–∞, –∑ –º–µ—Ç–∞–ª–æ–º, —â–æ –æ—Ç–æ—á—É—î –∫—Ä–∏—Å—Ç–∞–ª–∏ –æ–ª—ñ–≤—ñ–Ω—É. </p>
                            <div id="krasnojarsk-viewer" class="model-placeholder">
                                <iframe src="https://sketchfab.com/models/9139501aaf79496a86c8d9fa689b14da/embed" width="100%" height="200" allowfullscreen></iframe>
                            </div>
                        </div>
                    </div>
                    <div data-model-id="gaoguenie" class="card-3d">
                        <div class="card-3d-inner">
                            <h4 class="text-xl font-semibold mb-2">Gao‚ÄìGuenie (–ë—É—Ä–∫—ñ–Ω–∞-–§–∞—Å–æ, 1960)</h4>
                            <p class="text-sm text-slate-500">–∑–≤–∏—á–∞–π–Ω–∏–π —Ö–æ–Ω–¥—Ä–∏—Ç –≥—Ä—É–ø–∏ H5, —â–æ –≤–ø–∞–≤ —É –≤–∏–≥–ª—è–¥—ñ –º–µ—Ç–µ–æ—Ä–∏—Ç–Ω–æ–≥–æ –¥–æ—â—É –Ω–∞ –ø–ª–æ—â—ñ ~70 –∫–º¬≤, —É–ª–∞–º–∫–∏ —Ä–æ–∑–ª–µ—Ç—ñ–ª–∏—Å—å –Ω–∞ –∑–Ω–∞—á–Ω—É –≤—ñ–¥—Å—Ç–∞–Ω—å. </p>
                            <div id="gaoguenie-viewer" class="model-placeholder">
                                <iframe src="https://sketchfab.com/models/3079258abb304c169e65e650b5609515/embed" width="100%" height="200" allowfullscreen></iframe>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        `;


        // --- MAIN APPLICATION LOGIC FUNCTIONS ---
        
        function updateHeaderText(page) {
            headerTextContainer.innerHTML = '';
            if (page === 'meteorites') {
                headerTextContainer.innerHTML = `
                    <h1 class="text-4xl font-extrabold text-slate-900">Stardust Legacy</h1>
                    <p class="text-lg text-slate-600 mt-1">–û–∑–Ω–∞–π–æ–º—Ç–µ—Å—å –∑ –æ—Å–Ω–æ–≤–Ω–∏–º–∏ –≥—Ä—É–ø–∞–º–∏ –∫–æ—Å–º—ñ—á–Ω–∏—Ö –∫–∞–º–µ–Ω—ñ–≤, —è–∫—ñ –¥–æ—Å—è–≥–ª–∏ –Ω–∞—à–æ—ó –ø–ª–∞–Ω–µ—Ç–∏.</p>
                `;
            } else if (page === 'impaktor') {
                headerTextContainer.innerHTML = `
                    <h1 class="text-4xl font-extrabold text-slate-900">IMPAKTOR: –ê–Ω–∞–ª—ñ–∑ –†–∏–∑–∏–∫—ñ–≤</h1>
                    <p class="text-lg text-slate-600 mt-1">–ù–∞—É–∫–æ–≤–∏–π –ø—Ä–æ–≥–Ω–æ–∑ —Ç—Ä–∞—î–∫—Ç–æ—Ä—ñ—ó —Ç–∞ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏—Ö –Ω–∞—Å–ª—ñ–¥–∫—ñ–≤ –∑—É—Å—Ç—Ä—ñ—á—ñ –ó–µ–º–ª—ñ –∑ –ê—Å—Ç–µ—Ä–æ—ó–¥–æ–º "–Ü–º–ø–∞–∫—Ç–æ—Ä-X".</p>
                `;
            }
        }
        
        function updateViewClasses() {
            const isMobile = window.innerWidth < 768; 
            
            if (siteView === 'auto') {
                currentView = isMobile ? 'mobile' : 'pc';
            } else {
                currentView = siteView;
            }
            
            body.classList.remove('view-mobile', 'view-pc');
            if (currentView === 'mobile') {
                body.classList.add('view-mobile');
            } else if (currentView === 'pc') {
                body.classList.add('view-pc');
            }

            viewModeButtons.forEach(button => {
                button.classList.remove('view-mode-active', 'view-mode-inactive');
                const btnView = button.getAttribute('data-view');
                const isActive = (siteView === 'auto' && btnView === 'auto') || 
                                 (siteView !== 'auto' && siteView === btnView);
                
                if (isActive) {
                    button.classList.add('view-mode-active');
                } else {
                    button.classList.add('view-mode-inactive');
                }
            });
            
        }

        function setMainPage(page) {
            currentMainPage = page;

            mainTabMeteorites.classList.remove('main-tab-active', 'main-tab-inactive');
            mainTabImpaktor.classList.remove('main-tab-active', 'main-tab-inactive');

            if (page === 'meteorites') {
                meteoritePage.classList.remove('hidden');
                impaktorPage.classList.add('hidden');
                mainTabMeteorites.classList.add('main-tab-active');
                mainTabImpaktor.classList.add('main-tab-inactive');
                updateHeaderText('meteorites');
            } else if (page === 'impaktor') {
                meteoritePage.classList.add('hidden');
                impaktorPage.classList.remove('hidden');
                mainTabMeteorites.classList.add('main-tab-inactive');
                mainTabImpaktor.classList.add('main-tab-active');
                updateHeaderText('impaktor');
                setImpaktorSubPage(currentImpaktorPage);
            }
        }
        
        function setImpaktorSubPage(subpage) {
            currentImpaktorPage = subpage;
            
            flybyBtn.classList.remove('btn-active-flyby', 'btn-inactive-collision', 'btn-inactive-flyby');
            collisionBtn.classList.remove('btn-active-collision', 'btn-inactive-flyby', 'btn-inactive-collision');

            if (subpage === 'flyby') {
                contentContainer.innerHTML = flybyPageHTML;
                flybyBtn.classList.add('btn-active-flyby');
                collisionBtn.classList.add('btn-inactive-collision');
            } else if (subpage === 'collision') {
                contentContainer.innerHTML = collisionPageHTML;
                flybyBtn.classList.add('btn-inactive-flyby');
                collisionBtn.classList.add('btn-active-collision');
            }
            
            // Re-attach listeners for dynamically loaded cards
            document.querySelectorAll('.trigger-card').forEach(card => {
                card.addEventListener('click', (e) => {
                    const sectionId = e.currentTarget.getAttribute('data-section-id');
                    const data = predictionData[sectionId];
                    showModal(data);
                });
            });
        }
        
        // --- MODAL LOGIC ---

        function clear3d() {
            if (currentRenderer) {
                currentRenderer.dispose();
                while (modelViewer.firstChild) {
                    modelViewer.removeChild(modelViewer.firstChild);
                }
                currentRenderer = null;
            }
            if (currentAnimationId) {
                cancelAnimationFrame(currentAnimationId);
                currentAnimationId = null;
            }
        }
        
        function showModal(data) {
            clear3d(); 
            
            // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –≤–º—ñ—Å—Ç –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞
            modalContent.innerHTML = getModalContentHTML(data); 

            // –ü–æ–∫–∞–∑—É—î–º–æ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ —Ç–∞ –±–ª–æ–∫—É—î–º–æ —Å–∫—Ä–æ–ª
            modalOverlay.classList.remove('hidden');
            body.classList.add('overflow-hidden');
            
            // –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è –∑–∞–∫—Ä–∏—Ç—Ç—è –ø–æ –∫–ª—ñ–∫—É –ø–æ–∑–∞ –≤—ñ–∫–Ω–æ–º
            modalOverlay.addEventListener('click', handleOverlayClick);
        }

        function hideModal() {
            // –ö–õ–Æ–ß–û–í–ï: –î–æ–¥–∞—î–º–æ –∫–ª–∞—Å 'hidden'
            modalOverlay.classList.add('hidden');
            body.classList.remove('overflow-hidden');
            clear3d(); 
            
            // –û—á–∏—â–∞—î–º–æ –≤–º—ñ—Å—Ç –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞, —â–æ–± –∑–∞–ø–æ–±—ñ–≥—Ç–∏ Flash of Content
            modalContent.innerHTML = `<div id="model-viewer" class="w-full h-full min-h-[500px] flex justify-center items-center"></div>`;

            modalOverlay.removeEventListener('click', handleOverlayClick);
        }
        
        function handleOverlayClick(event) {
            // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –∫–ª—ñ–∫ –±—É–≤ —Å–∞–º–µ –Ω–∞ overlay, –∞ –Ω–µ –Ω–∞ modal-container
            if (event.target.id === 'modal-overlay') {
                hideModal();
            }
        }
        
        // --- INITIALIZATION AND EVENT LISTENERS ---

        document.addEventListener('DOMContentLoaded', () => {
            // 1. Fill the static meteorite info page content
            meteoritePage.innerHTML = meteoriteInfoHTML; 

            // 2. Set initial view and main page
            updateViewClasses(); 
            setMainPage('meteorites'); 
            
            // 3. Attach all event listeners
            mainTabMeteorites.addEventListener('click', () => setMainPage('meteorites'));
            mainTabImpaktor.addEventListener('click', () => setMainPage('impaktor'));
            
            if(flybyBtn) flybyBtn.addEventListener('click', () => setImpaktorSubPage('flyby'));
            if(collisionBtn) collisionBtn.addEventListener('click', () => setImpaktorSubPage('collision'));
            
            // –ö–õ–Æ–ß–û–í–ï: –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞
            modalCloseBtn.addEventListener('click', hideModal);

            viewModeButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    const newSiteView = e.currentTarget.getAttribute('data-view');
                    siteView = newSiteView;
                    localStorage.setItem('siteView', siteView);
                    updateViewClasses();
                });
            });

            window.addEventListener('resize', updateViewClasses);
            
            // –í–ê–ñ–õ–ò–í–û: –¢—É—Ç –Ω–µ–º–∞—î –∂–æ–¥–Ω–æ–≥–æ –≤–∏–ø–∞–¥–∫–æ–≤–æ–≥–æ –≤–∏–∫–ª–∏–∫—É showModal()!
        });
        
    </script>
</body>

</html>


